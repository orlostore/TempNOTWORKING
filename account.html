customerName').textContent = name;
                } else {
                    document.getElementById('profileAlert').innerHTML = 
                        `<div class="alert alert-error">${data.error || 'Failed to update'}</div>`;
                }
            } catch (error) {
                document.getElementById('profileAlert').innerHTML = 
                    '<div class="alert alert-error">Connection error</div>';
            }
        }
        
        // Change password
        async function changePassword(e) {
            e.preventDefault();
            
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            
            try {
                const response = await fetch('/api/auth/password', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({ currentPassword, newPassword })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('passwordAlert').innerHTML = 
                        '<div class="alert alert-success">Password changed successfully!</div>';
                    document.getElementById('passwordForm').reset();
                } else {
                    document.getElementById('passwordAlert').innerHTML = 
                        `<div class="alert alert-error">${data.error || 'Failed to change password'}</div>`;
                }
            } catch (error) {
                document.getElementById('passwordAlert').innerHTML = 
                    '<div class="alert alert-error">Connection error</div>';
            }
        }
        
        // Show add address modal (simplified - just prompt for now)
        function showAddAddress() {
            alert('Add address feature coming soon!');
        }
        
        async function setDefaultAddress(id) {
            try {
                await fetch('/api/auth/addresses/' + id + '/default', {
                    method: 'PUT',
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                loadAddresses();
            } catch (error) {
                alert('Error setting default address');
            }
        }
        
        async function deleteAddress(id) {
            if (!confirm('Delete this address?')) return;
            
            try {
                await fetch('/api/auth/addresses/' + id, {
                    method: 'DELETE',
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                loadAddresses();
            } catch (error) {
                alert('Error deleting address');
            }
        }
        
        // Load orders on page load
        loadOrders();
    </script>
</body>
</html>
customerName').textContent = name;
                } else {
                    document.getElementById('profileAlert').innerHTML = 
                        `<div class="alert alert-error">${data.error || 'Failed to update'}</div>`;
                }
            } catch (error) {
                document.getElementById('profileAlert').innerHTML = 
                    '<div class="alert alert-error">Connection error</div>';
            }
        }
        
        // Change password
        async function changePassword(e) {
            e.preventDefault();
            
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            
            try {
                const response = await fetch('/api/auth/password', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({ currentPassword, newPassword })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('passwordAlert').innerHTML = 
                        '<div class="alert alert-success">Password changed successfully!</div>';
                    document.getElementById('passwordForm').reset();
                } else {
                    document.getElementById('passwordAlert').innerHTML = 
                        `<div class="alert alert-error">${data.error || 'Failed to change password'}</div>`;
                }
            } catch (error) {
                document.getElementById('passwordAlert').innerHTML = 
                    '<div class="alert alert-error">Connection error</div>';
            }
        }
        
        // Show add address modal
        function showAddAddress() {
            alert('Add address feature coming soon!');
        }
        
        async function setDefaultAddress(id) {
            try {
                await fetch('/api/auth/addresses/' + id + '/default', {
                    method: 'PUT',
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                loadAddresses();
            } catch (error) {
                alert('Error setting default address');
            }
        }
        
        async function deleteAddress(id) {
            if (!confirm('Delete this address?')) return;
            
            try {
                await fetch('/api/auth/addresses/' + id, {
                    method: 'DELETE',
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                loadAddresses();
            } catch (error) {
                alert('Error deleting address');
            }
        }
        
        // Load orders on page load
        loadOrders();
    </script>
</body>
</html>
